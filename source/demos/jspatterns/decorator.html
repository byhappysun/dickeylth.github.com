<!DOCTYPE html>
<html>
<head>
    <title>装饰者模式</title>
    <meta charset="UTF-8">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <h3>装饰者模式：运行时动态添加附加功能到对象中</h3>
    <div id="target">
        <h4>预期：</h4>
        <div class="ace-code"></div>

<script class="ace-code-script" type="template">
function Fe(){
    this.slice = function(){
        console.log("我会切图");
    }
    this.buildPage = function(){
        console.log("我会搭页面");
    }
}

var fe = new Fe();
KISSY.mix(fe, {

    this.designAlgorithm = function(){
        console.log("我会算法设计");
    }

    this.sqlTuning = function(){
        console.log("我会SQL调优");
    }
});

fe.designAlgorithm();
fe.sqlTuning();
</script>

    </div>

    <div class="methods">
        <h4>实现：</h4>

        <div class="method-container">
            <div class="ace-code"></div>

<script class="ace-code-script" type="template">
// 父构造函数
function EngineerFactory(){}

// 原型方法
EngineerFactory.prototype.work = function(){
    return "生产中：" + this.languages + ", ...";
};

// 静态工厂方法
EngineerFactory.build = function(type){

    var newEngineer,
        id = 0;

    // 如果构造函数不存在，抛出错误
    if(typeof EngineerFactory[type] !== 'function'){
        throw(type + " 不存在");
    }

    // 原型继承父类
    if(typeof EngineerFactory[type].prototype.work !== 'function'){
        EngineerFactory[type].prototype = new EngineerFactory();
    }

    // 创建新实例
    newEngineer = new EngineerFactory[type]();
    newEngineer.id = id++;

    return newEngineer;
};

EngineerFactory.FE = function(){
    this.languages = "HTML, CSS, JavaScript";
};

EngineerFactory.RD = function(){
    this.languages = "Java, Velocity, Spring, Hibernate";
};

EngineerFactory.OP = function(){
    this.languages = "perl, python, php, shell, sql";
};

var fe = EngineerFactory.build('FE');
var rd = EngineerFactory.build('RD');
var op = EngineerFactory.build('OP');
[fe.work(),  //结果为："生产中：HTML, CSS, JavaScript, ..."
rd.work(),  //结果为："生产中：Java, Velocity, Spring, Hibernate, ..."
op.work()].join('<br/>');  //结果为："生产中：perl, python, php, shell, sql, ..."
</script>

            <div class="result">
                <button class="J_RunBtn btn btn-primary">运行</button>
                <output class="J_Output"></output>
            </div>
        </div>

    </div>

    <div class="methods">
        <h5>相关话题：JavaScript中的内置对象工厂</h5>
        <div class="method-container">
            <div class="ace-code"></div>

<script class="ace-code-script" type="template">
var o = new Object(),
    n = new Object(1),
    s = Object('1'),
    b = Object(true);

[
    o.constructor === Object,
    n.constructor === Number,
    s.constructor === String,
    b.constructor === Boolean
].join('<br/>');
</script>

            <div class="result">
                <button class="J_RunBtn btn btn-primary">运行</button>
                <output class="J_Output"></output>
            </div>
        </div>
    </div>

    <script src="http://g.tbcdn.cn/kissy/k/1.3.2/kissy-min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="js/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/index.js"></script>
</body>
</html>